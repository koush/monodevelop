<?xml version="1.0"?>
<Template originator="Koushik Dutta"
          created="2009/06/08">
    
    <!-- Template Header -->
    <TemplateConfiguration>
        <_Name>Android Application Project</_Name>
        <_Category>Android</_Category>
        <Icon>md-project-android</Icon>
        <LanguageName>*</LanguageName>
        <_Description>Creates a Mono project for Android.</_Description>
    </TemplateConfiguration>
    
    <!-- Actions -->
    <Actions>
    </Actions>
    
    <!-- Template Content -->
    <Combine name = "${ProjectName}" directory = ".">
        <Options>
            <StartupProject>${ProjectName}</StartupProject>
        </Options>
        
        <Project name = "${ProjectName}" directory = "." type = "Android">
            <Options />
            <References>
                <Reference type="Gac" refto="System" />
                <Reference type="Gac" refto="System.Xml" />
                <Reference type="Gac" refto="System.Core" />
                <Reference type="Gac" refto="android, Version=0.0.0.0, Culture=neutral" />
                <Reference type="Gac" refto="jni4net.n-0.8.1.0, Version=0.0.0.0, Culture=neutral" />
            </References>
            <Files>
                <Directory name="Android" >
                    <Directory name="res" >
                        <Directory name="drawable" />
                        <Directory name="layout" />
                        <Directory name="values" />
                        <Directory name="xml" />
                    </Directory>
                    <Directory name="assets" />
                </Directory>
                <File name="Android/res/values/strings.xml">
<![CDATA[<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">${ProjectName}</string>
</resources>]]>
                </File>
                <File name="Android/AndroidManifest.xml">
<![CDATA[<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="${ProjectName}"
      android:versionCode="1"
      android:versionName="1">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MonoActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".MainActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-sdk android:minSdkVersion="7" />
</manifest> 
]]>
                </File>
                <File name="Android/default.properties">
<![CDATA[# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
# 
# This file must be checked in Version Control Systems.
# 
# To customize properties used by the Ant build system use,
# "build.properties", and override values to adapt the script to your
# project structure.

# Indicates whether an apk should be generated for each density.
split.density=false
# Project target.
target=android-7
apk-configurations=
]]>
                </File>
                <File name="Program.cs">
<![CDATA[using System;

namespace ${Namespace}
{
    public static class Program
    {
        public static void Main (string[] args)
        {
            string appNamespace = typeof(Program).Namespace;
            Console.WriteLine ("Starting the application via Activity Manager (am). This process will exit.");
            var arguments = string.Format("-c 'am start -a android.intent.action.MAIN -n {0}/{0}.MainActivity'", appNamespace);
            var psi = new System.Diagnostics.ProcessStartInfo()
            {
                Arguments = arguments,
                FileName = "/system/bin/sh",
            };
            try
            {
                var p = System.Diagnostics.Process.Start (psi);
                if (p == null)
                    throw new Exception("No Process returned.");
                Console.WriteLine("Activity launched. This process will sleep until terminated by the user. The application's standard output can be viewed in logcat.");
                System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error starting activity!");
                Console.WriteLine(ex);
                Console.WriteLine(ex.Message);
            }
        }
    }
}   
]]>
                </File>
                <File name="MainActivity.cs">
<![CDATA[using System;
using android.app;
using android.widget;

namespace ${Namespace}
{
    public class MainActivity : Activity
    {
        protected override void onCreate (android.os.Bundle arg0)
        {
            base.onCreate (arg0);
            var tv = new TextView(this);
            tv.setText("Hello World!");
            setContentView(tv);
        }

        // This constructor is a requirement for all CLR classes that inherit from java.lang.Object
        protected MainActivity(net.sf.jni4net.jni.JNIEnv env) : base(env)
        {
        }
    }
}   
]]>
                </File>
            </Files>
        </Project>
    </Combine>
</Template>
